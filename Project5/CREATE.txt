-- Persons
DROP TABLE IF EXISTS PersonsIDSSN;
DROP TABLE IF EXISTS PersonsDIDDN;
DROP TABLE IF EXISTS PersonsZT;

CREATE TABLE PersonsIDSSN (
       ID INTEGER,
       SSN CHAR(10),
       PN CHARACTER VARYING, 
       DID INTEGER,  
       Z INTEGER, 
	PRIMARY KEY (ID, SSN),
	FOREIGN KEY (DID) REFERENCES PersonsDIDDN(DID),
	FOREIGN KEY (Z) REFERENCES PersonsZT(Z)
);

CREATE TABLE PersonsDIDDN (
       DID INTEGER, 
       DN CHARACTER VARYING,
	PRIMARY KEY (DID)
);

CREATE TABLE PersonsZT ( 
       Z INTEGER, 
       T CHARACTER VARYING,
	PRIMARY KEY (Z)
);

--- Projects
DROP TABLE IF EXISTS ProjectsIDPID;
DROP TABLE IF EXISTS ProjectsPIDDIDDMPN;
DROP TABLE IF EXISTS ProjectsDIDDMDN;

CREATE TABLE ProjectsIDPID (
	ID INTEGER, 
	PID INTEGER
	PRIMARY KEY (ID),
	FOREIGN KEY (PID) REFERENCES ProjectsPIDDIDDMPN(PID)
);

CREATE TABLE ProjectsPIDDIDDMPN (
	PID INTEGER, 
	DID INTEGER,
	DM INTEGER,
	PN CHARACTER VARYING, 
	PRIMARY KEY (PID),
	FOREIGN KEY (DID, DM) REFERENCES ProjectsDIDDMDN(DID, DM)
);

CREATE TABLE ProjectsDIDDMDN (
	DID INTEGER,
	DM INTEGER,
	DN CHARACTER VARYING, 
	PRIMARY KEY (DID, DM)
);